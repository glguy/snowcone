.\" Text automatically generated by txt2man
.TH snowcone 1 "07 October 2021" "snowcone" ""
.SH NAME
\fBsnowcone \fP- solanum server notice console
.SH SYNOPSIS
.nf
.fam C
\fBsnowcone\fP \fB-S\fP \fIaddress\fP \fB-N\fP \fInick\fP [\fB-U\fP \fIuser\fP] [\fB-G\fP \fIgecos\fP] [\fB-X\fP \fIpassword\fP]
         [\fB-O\fP \fIopername\fP] [\fB-K\fP \fIchallenge\fP] [\fB-M\fP \fImechanism\fP]
         [\fB-E\fP \fIsaslname\fP] [\fB-C\fP \fIcapabilities\fP] [\fB-L\fP \fIinitfile\fP]
         [\fB-h\fP \fIhost\fP] [\fB-p\fP \fIport\fP]
.fam T
.fi
.fam T
.fi
.SH DESCRIPTION
\fBsnowcone\fP provides a live view of server notices focused on awareness
of recent connections and disconnections to the network. It can show
information about the most recent connections as well as various load
meters split by server and operators. It does this with a run-time
editable scripting environment to support rapidly adapting to the
needs of the current situation.
.PP
Instead of bundling its own network connection support, \fBsnowcone\fP relies
on the socat application to make network connections. This allows
\fBsnowcone\fP to natively support a wide range of network connection options.
.SH OPTIONS
.TP
.B
\fB-S\fP \fIaddress\fP
specify the IRC server to connect to using \fBsocat\fP(1)
argument syntax.
.TP
.B
\fB-N\fP \fInick\fP
IRC nickname (NICK)
.TP
.B
\fB-U\fP \fIuser\fP
IRC username (USER)
.TP
.B
\fB-G\fP \fIgecos\fP
IRC \fIgecos\fP/realname (USER)
.TP
.B
\fB-X\fP \fIpassword\fP
IRC \fIpassword\fP (PASS)
.TP
.B
\fB-O\fP \fIopername\fP
IRC operator username (OPER and CHALLENGE)
.TP
.B
\fB-K\fP \fIchallenge\fP
Path to RSA key for CHALLENGE. Challenge support requires
you to install an extra Lua dependency with: luarocks install openssl
.TP
.B
\fB-M\fP \fImechanism\fP
SASL \fImechanism\fP: PLAIN or EXTERNAL
.TP
.B
\fB-E\fP \fIsaslname\fP
SASL PLAIN username
.TP
.B
\fB-C\fP \fIcapabilities\fP
Extra space-delimited \fIcapabilities\fP to request upon connect (CAP REQ)
.TP
.B
\fB-L\fP \fIinitfile\fP
Path to Lua logic entry point (defaults to init.lua)
.TP
.B
\fB-h\fP \fIhost\fP
Binding \fIhost\fP for Lua console
.TP
.B
\fB-p\fP \fIport\fP
Binding TCP \fIport\fP for Lua console
.SH ENVIRONMENT
Sensitive arguments are passed using environment variables to keep them
out of the process list.
.TP
.B
IRC_PASSWORD
IRC \fIpassword\fP (PASS)
.TP
.B
IRC_SASL_PASSWORD
IRC account \fIpassword\fP (SASL PLAIN)
.TP
.B
IRC_OPER_PASSWORD
IRC operator \fIpassword\fP (OPER)
.SH SOCAT ADDRESSES
Check the \fBsocat\fP(1) man page for an exhaustive set of connection
addresses, but these will be the most commonly used:
.TP
.B
TCP:server:6667
Connect to a plain-text IRC server
.TP
.B
OPENSSL:server:6697,certificate=cert.pem
Connect to a TLS-enabled IRC server using a client-side certificate
.SH LUA CONSOLE
When a Lua console \fIport\fP is specified, \fBsnowcone\fP will listen for
connections on that \fIport\fP and provide a Lua console with access
to \fBsnowcone\fP's internal state. This can be useful for developing
\fBsnowcone\fP or adding custom logic at runtime. Calls to print from
inside a console will be piped back to that console.
.SH MODES
.TP
.B
F1
recent connections
.TP
.B
F2
server connection load
.TP
.B
F3
recent exits
.TP
.B
F4
server exit load
.TP
.B
F5
kline load
.TP
.B
F6
filter load
.TP
.B
F7
reconnecting nicknames
.TP
.B
F8
raw IRC console
.TP
.B
F9
network-mask connection tracker
.TP
.B
C-n
next view
.TP
.B
C-p
previous view
.SH SH RECENT CONNECTIONS
The recent connections view has a number of special features. Click on
a connection to select it for kline or unkline. The buttons below will
allow you to set kline reasons, durations, and to see the number of
affected users before you commit to the action.
.TP
.B
Q
only live connections
.TP
.B
W
only dead connections
.TP
.B
E
all connections
.TP
.B
K
issue kline
.TP
.B
Esc
clear filters, reset scroll, clear status message
.TP
.B
PgUp
scroll up
.TP
.B
PgDn
scroll down
.SH RAW CLIENT
The raw client view (F8) is primarily intended for debugging. It exists
to see what \fBsnowcone\fP sees.
.TP
.B
C-r
Toggle raw/aligned message rendering
.TP
.B
Esc
Erase input buffer
.TP
.B
Enter
Execute IRC command
.TP
.B
/eval luacode
Evaluate arbitrary Lua code
.TP
.B
/filter pattern
Update the recent connection filter
using Lua pattern syntax
.TP
.B
/nettrack \fIaddress\fP/prefix
Add a network to the F9 tracking view
.TP
.B
/quote raw_command
Send a raw IRC command
.SH GEOIP SUPPORT
Both legacy GeoIP and modern GeoIP Maxmind database are supported
and will be used if they are found at startup time.
.SH FILES
.TP
.B
/usr/share/\fBsnowcone\fP/lua
Lua run-time source files. These can be edited at runtime. Specify
an alternative entry point with \fB-L\fP.
.TP
.B
GeoLite2-ASN.mmdb
If the mmdb Lua library is installed, and the GeoLite2-ASN.mmdb
database is in the current directory, \fBsnowcone\fP will use it to provide
more information about recent connections.
.SH AUTHOR
\fBsnowcone\fP was written by Eric Mertens <glguy@libera.chat> and is published
under the ISC license.
